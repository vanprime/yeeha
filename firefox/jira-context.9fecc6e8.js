var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,r,o,n,a){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[n]&&i[n],c=s.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(e,r){if(!c[e]){if(!t[e]){var o="function"==typeof i[n]&&i[n];if(!r&&o)return o(e,!0);if(s)return s(e,!0);if(l&&"string"==typeof e)return l(e);var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}f.resolve=function(r){var o=t[e][1][r];return null!=o?o:r},f.cache={};var p=c[e]=new u.Module(e);t[e][0].call(p.exports,f,p,p.exports,this)}return c[e].exports;function f(e){var t=f.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=t,u.cache=c,u.parent=s,u.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return i[n]}}),i[n]=u;for(var p=0;p<r.length;p++)u(r[p]);if(o){var f=u(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):a&&(this[a]=f)}}({BuRLh:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"config",()=>s);var n=e("~lib/jira-detection"),a=e("~contexts/jira-context");let i=()=>{let e=window.location,t=window.document,r=(0,n.detectIssueKey)({location:e,document:t}),o=(0,n.detectProjectKey)({location:e,document:t});!o&&r&&(o=(0,n.deriveProjectKeyFromIssueKey)(r));let a=(0,n.getJiraBaseUrlFromLocation)({location:e}),i=r?r.toUpperCase():"",s=o?(0,n.normalizeProjectKey)(o):"";return{issueKey:i,projectKey:s,baseUrl:"string"==typeof a?a.trim():""}},s={matches:["https://*/secure/*","https://*/browse/*","https://*/projects/*","https://*/issues*","https://*/jira/*","http://*/secure/*","http://*/browse/*","http://*/projects/*","http://*/issues*","http://*/jira/*"],run_at:"document_idle"};"undefined"!=typeof chrome&&chrome.runtime?.onMessage&&chrome.runtime.onMessage.addListener((e,t,r)=>{if(!e||e.type!==a.JIRA_CONTEXT_MESSAGE_TYPE)return!1;try{let e=i();r({success:!0,...e})}catch(e){console.warn("jira-context content script: failed to collect context",e),r({success:!1,issueKey:"",projectKey:"",baseUrl:""})}return!1})},{"~lib/jira-detection":"7J4sI","~contexts/jira-context":"474g3","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],"7J4sI":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"ISSUE_KEY_REGEX",()=>n),o.export(r,"normalizeProjectKeySegments",()=>a),o.export(r,"normalizeProjectKeyList",()=>i),o.export(r,"normalizeProjectKey",()=>s),o.export(r,"getJiraBaseUrlFromLocation",()=>c),o.export(r,"detectProjectKeyFromLocation",()=>l),o.export(r,"detectIssueKeyFromSearchParams",()=>u),o.export(r,"detectProjectKeyFromSearchParams",()=>p),o.export(r,"detectProjectKeyFromHash",()=>f),o.export(r,"detectIssueKeyFromPath",()=>d),o.export(r,"detectIssueKeyFromDocument",()=>y),o.export(r,"detectProjectKeyFromDocument",()=>m),o.export(r,"detectIssueKey",()=>h),o.export(r,"deriveProjectKeyFromIssueKey",()=>j),o.export(r,"detectProjectKey",()=>g);let n=/^[A-Z][A-Z0-9]+-[1-9][0-9]*$/i,a=e=>e.split(",").map(e=>e.trim().toUpperCase()).filter(Boolean),i=e=>{let t=a(e),r=new Set;for(let e of t)r.has(e)||r.add(e);return Array.from(r.values())},s=e=>i(e).join(","),c=({location:e}={})=>{try{return e?.origin||""}catch(e){return console.error("getJiraBaseUrlFromLocation: failed to read origin",e),""}},l=e=>{if(!e?.pathname)return"";let t=/\/projects\/([^/]+)/i.exec(e.pathname);return s(t?.[1]??"")},u=e=>{if(!e?.search)return"";try{let t=new URLSearchParams(e.search);return t.get("selectedIssue")||t.get("issueKey")||""}catch(e){return console.error("detectIssueKey: failed to read search params",e),""}},p=e=>{let t=e?.search;if(!t)return"";try{let e=new URLSearchParams(t),r=e.get("projectKey")||e.get("project");if(r)return s(r);for(let[t,r]of e.entries()){if(!r)continue;let e=t.trim().toLowerCase();if("projectkey"===e||"project"===e)return s(r)}}catch(e){console.error("detectProjectKey: failed to read search params",e)}return""},f=e=>{let t=e?.hash;if(!t)return"";let r=t.startsWith("#")?t.slice(1):t;if(!r)return"";try{let e=new URLSearchParams(r.startsWith("?")?r:`?${r}`),t=e.get("projectKey")||e.get("project");if(t)return s(t);for(let[t,r]of e.entries()){if(!r)continue;let e=t.trim().toLowerCase();if("projectkey"===e||"project"===e)return s(r)}}catch(e){console.error("detectProjectKey: failed to read hash params",e)}return""},d=e=>{if(!e?.pathname)return"";let t=e.pathname.split("/").filter(Boolean),r=t[t.length-1]||"";return n.test(r)?r.toUpperCase():""},y=e=>{if(!e)return"";let t=e.querySelector("meta[name='ajs-issue-key']"),r=t?.getAttribute("content");if(r)return r.toUpperCase();let o=e.querySelector("[data-issue-key]"),n=o?.getAttribute("data-issue-key");return n?n.toUpperCase():""},m=e=>{if(!e)return"";let t=(t,r)=>{let o=e.querySelector(t),n=o?.getAttribute(r);return"string"==typeof n?s(n):""};for(let e of["meta[name='ajs-project-key']","meta[name='ajs-projectKey']","meta[name='ghx-project-key']","meta[name='jira-project-key']"]){let r=t(e,"content");if(r)return r}for(let t of["[data-project-key]","[data-projectKey]","[data-project]"]){let r=e.querySelector(t),o=r?.getAttribute("data-project-key")||r?.getAttribute("data-projectKey")||r?.getAttribute("data-project");if(o)return s(o)}let r=(e.body?.dataset?.projectKey??e.body?.dataset?.project)?.toString();if(r)return s(r);try{let e=globalThis.AJS?.Meta?.get;if("function"==typeof e)for(let t of["project-key","projectKey","project.key"]){let r=e(t);if("string"==typeof r&&r.trim().length)return s(r)}}catch(e){console.warn("detectProjectKey: failed to read AJS meta",e)}return""},h=({location:e,document:t}={})=>{let r=u(e);if(r)return r.toUpperCase();let o=d(e);return o||y(t)},j=e=>{if("string"!=typeof e)return"";let[t=""]=e.split("-");return s(t)},g=({location:e,document:t}={})=>{try{let r=l(e);if(r)return r;let o=p(e);if(o)return o;let n=f(e);if(n)return n;let a=m(t);if(a)return a;let i=h({location:e,document:t});if(i)return j(i)}catch(e){console.error("detectProjectKey: detection failed",e)}return""}},{"@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],cHUbl:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"474g3":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"resolveActiveTabLocation",()=>y),o.export(r,"detectIssueKey",()=>m),o.export(r,"deriveProjectKeyFromIssueKey",()=>h),o.export(r,"detectProjectKey",()=>j),o.export(r,"resolveProjectKey",()=>K),o.export(r,"resolveIssueKey",()=>b),o.export(r,"resolveIssueContext",()=>w),o.export(r,"getProjectVariables",()=>x),o.export(r,"extractProjectKey",()=>P),o.export(r,"normalizeProjectKey",()=>n.normalizeProjectKey),o.export(r,"getJiraBaseUrlFromLocation",()=>n.getJiraBaseUrlFromLocation),o.export(r,"navigateActiveTab",()=>v),o.export(r,"ISSUE_KEY_REGEX",()=>n.ISSUE_KEY_REGEX),o.export(r,"createLocationFromUrl",()=>l),o.export(r,"JIRA_CONTEXT_MESSAGE_TYPE",()=>U);var n=e("~lib/jira-detection");let a=/^(about|chrome|edge|devtools|moz-extension|chrome-extension):/i,i="jiraExtensions:getJiraContext",s=()=>"undefined"!=typeof window?window.location:void 0,c=()=>"undefined"!=typeof window?window.document:void 0,l=e=>{if("string"==typeof e&&e)try{let t=new URL(e);return{href:t.href,origin:t.origin,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host,hostname:t.hostname,port:t.port,protocol:t.protocol}}catch(e){console.error("createLocationFromUrl: failed to parse URL",e);return}},u=async(e={active:!0,lastFocusedWindow:!0})=>{if("undefined"!=typeof chrome&&chrome?.tabs?.query)try{let t=await new Promise((t,r)=>{try{chrome.tabs.query(e,e=>{let o=chrome?.runtime?.lastError;if(o){r(Error(o.message));return}t(e)})}catch(e){r(e)}});return t[0]}catch(e){console.error("queryActiveTab: failed",e);return}},p=async e=>{if("undefined"!=typeof chrome&&chrome?.tabs?.get)return await new Promise(t=>{try{chrome.tabs.get(e,e=>{if(chrome.runtime?.lastError){console.warn("getTabById: tabs.get failed",chrome.runtime.lastError),t(void 0);return}t(e)})}catch(e){console.warn("getTabById: tabs.get threw",e),t(void 0)}})},f=async e=>"undefined"!=typeof chrome&&chrome?.tabs?.sendMessage?await new Promise(t=>{try{chrome.tabs.sendMessage(e,{type:i},e=>{if(chrome.runtime?.lastError||!e||"object"!=typeof e){t(null);return}t({issueKey:"string"==typeof e.issueKey?e.issueKey:void 0,projectKey:"string"==typeof e.projectKey?e.projectKey:void 0,baseUrl:"string"==typeof e.baseUrl?e.baseUrl:void 0})})}catch(e){console.warn("requestContextFromTab: failed",e),t(null)}}):null,d=async({tabId:e,tabQuery:t}={})=>{let r;if("undefined"==typeof chrome||!chrome?.tabs?.get&&!chrome?.tabs?.query||("number"==typeof e&&(r=await p(e)),r||(r=await u(t)),!r||"string"!=typeof r.url||!r.url||a.test(r.url)))return null;let o=l(r.url),i=o?m({location:o,document:void 0}):"",s=o?j({location:o,document:void 0}):"",c=o?(0,n.getJiraBaseUrlFromLocation)({location:o}):"",d="number"==typeof r.id?r.id:null;if(null!==d){let e=await f(d);e&&("string"==typeof e.issueKey&&e.issueKey.trim().length&&(i=e.issueKey.toUpperCase()),"string"==typeof e.projectKey&&e.projectKey.trim().length&&(s=(0,n.normalizeProjectKey)(e.projectKey)),"string"==typeof e.baseUrl&&e.baseUrl.trim().length&&(c=e.baseUrl))}return!s&&i&&(s=(0,n.deriveProjectKeyFromIssueKey)(i)),{issueKey:i,projectKey:s,baseUrl:c,location:o}},y=async(e={active:!0,lastFocusedWindow:!0})=>{try{let t=await u(e),r=t?.url;if(!r)return;return l(r)}catch(e){console.error("resolveActiveTabLocation: failed",e);return}},m=({location:e=s(),document:t=c()}={})=>(0,n.detectIssueKey)({location:e,document:t}),h=e=>(0,n.deriveProjectKeyFromIssueKey)(e),j=({location:e=s(),document:t=c()}={})=>(0,n.detectProjectKey)({location:e,document:t}),g=async({location:e=s(),document:t=c(),allowTabLookup:r=!0,tabQuery:o,tabId:a}={})=>{let i=m({location:e,document:t}),l=j({location:e,document:t}),u=e,p=(0,n.getJiraBaseUrlFromLocation)({location:e}),f=r&&(!l||!i);if(f){let e=await d({tabId:a,tabQuery:o});e&&(!i&&e.issueKey&&(i=e.issueKey),!l&&e.projectKey&&(l=e.projectKey),e.location&&(u=e.location),!p&&e.baseUrl&&(p=e.baseUrl))}!l&&i&&(l=(0,n.deriveProjectKeyFromIssueKey)(i));let y=i?i.toUpperCase():"",h=l?(0,n.normalizeProjectKey)(l):"",g="string"==typeof p?p.trim():"";return{issueKey:y,projectKey:h,baseUrl:g,location:u}},K=async(e={})=>{let t=await g(e);return t.projectKey},b=async(e={})=>{let t=await g(e);return t.issueKey},w=async(e={})=>g(e),x=(e={})=>{try{let t=m(e);if(!t)throw Error("Could not determine the parent issue from the URL or page content.");let r=(0,n.deriveProjectKeyFromIssueKey)(t);if(!r)throw Error("Project key could not be determined from the issue key.");return{parentIssueKey:t,projectKey:r}}catch(e){throw Error(`getProjectVariables failed: ${e.message}`)}},P=e=>j(e),v=async e=>{if("undefined"!=typeof chrome&&chrome?.tabs?.update&&chrome?.tabs?.query)try{let t=await u();if(t?.id!=null)return await new Promise((r,o)=>{chrome.tabs.update(t.id,{url:e},()=>{if(chrome.runtime?.lastError){o(Error(chrome.runtime.lastError.message));return}r()})}),!0}catch(e){console.warn("navigateActiveTab: chrome.tabs.update failed, falling back",e)}return window.open(e,"_blank","noopener,noreferrer"),!1},U=i},{"~lib/jira-detection":"7J4sI","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}]},["BuRLh"],"BuRLh","parcelRequire4c9f"),globalThis.define=t;