var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,r,o,n,a){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[n]&&i[n],l=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(e,r){if(!l[e]){if(!t[e]){var o="function"==typeof i[n]&&i[n];if(!r&&o)return o(e,!0);if(s)return s(e,!0);if(c&&"string"==typeof e)return c(e);var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}f.resolve=function(r){var o=t[e][1][r];return null!=o?o:r},f.cache={};var p=l[e]=new u.Module(e);t[e][0].call(p.exports,f,p,p.exports,this)}return l[e].exports;function f(e){var t=f.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=t,u.cache=l,u.parent=s,u.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return i[n]}}),i[n]=u;for(var p=0;p<r.length;p++)u(r[p]);if(o){var f=u(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):a&&(this[a]=f)}}({BuRLh:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"config",()=>l);var n=e("~lib/extension-runtime"),a=e("~lib/jira-detection"),i=e("~contexts/jira-context");let s=()=>{let e=window.location,t=window.document,r=(0,a.detectIssueKey)({location:e,document:t}),o=(0,a.detectProjectKey)({location:e,document:t});!o&&r&&(o=(0,a.deriveProjectKeyFromIssueKey)(r));let n=(0,a.getJiraBaseUrlFromLocation)({location:e}),i=r?r.toUpperCase():"",s=o?(0,a.normalizeProjectKey)(o):"";return{issueKey:i,projectKey:s,baseUrl:"string"==typeof n?n.trim():""}},l={matches:["https://*/secure/*","https://*/browse/*","https://*/projects/*","https://*/issues*","https://*/jira/*","http://*/secure/*","http://*/browse/*","http://*/projects/*","http://*/issues*","http://*/jira/*"],run_at:"document_idle"},c=(0,n.getExtensionRuntimeApi)();c?.runtime?.onMessage?.addListener&&c.runtime.onMessage.addListener((e,t,r)=>{if(!e||e.type!==i.JIRA_CONTEXT_MESSAGE_TYPE)return!1;try{let e=s();r({success:!0,...e})}catch(e){console.warn("jira-context content script: failed to collect context",e),r({success:!1,issueKey:"",projectKey:"",baseUrl:""})}return!1})},{"~lib/extension-runtime":"4lLoG","~lib/jira-detection":"7J4sI","~contexts/jira-context":"474g3","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],"4lLoG":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"getExtensionRuntimeApi",()=>f),o.export(r,"isFirefoxRuntime",()=>d),o.export(r,"getExtensionManifestVersion",()=>y),o.export(r,"openExternalTab",()=>m),o.export(r,"queryTabs",()=>h),o.export(r,"getTab",()=>b),o.export(r,"sendTabMessage",()=>g),o.export(r,"updateTab",()=>j),o.export(r,"isChromeSidePanelAvailable",()=>x),o.export(r,"isFirefoxSidebarAvailable",()=>w),o.export(r,"getExtensionUrl",()=>K),o.export(r,"configureChromeSidePanel",()=>P),o.export(r,"configureChromeSidePanelBehavior",()=>v),o.export(r,"openFirefoxSidebar",()=>U),o.export(r,"enableFirefoxSidebarActionBehavior",()=>E);let n=!1,a=()=>"undefined"==typeof chrome?null:chrome,i=()=>{let e=globalThis.browser;return e??null},s=e=>!!e&&"function"==typeof e.then,l=(e,t)=>e instanceof Error&&e.message.trim().length>0?e:Error(t),c=()=>{let e=a()?.runtime?.lastError;return e?"string"==typeof e.message&&e.message.trim().length>0?e.message:"Browser runtime request failed.":null},u=e=>null!==e&&e===i(),p=async({runtimeApi:e,callWithPromise:t,callWithCallback:r,fallbackError:o})=>{if(!e)throw Error(o);if(u(e))try{return await t()}catch(e){throw l(e,o)}return await new Promise((e,t)=>{try{r(r=>{let o=c();if(o){t(Error(o));return}e(r)},e=>t(l(e,o)))}catch(e){t(l(e,o))}})},f=()=>i()??a(),d=()=>{let e=f();return!!e?.sidebarAction?.open},y=()=>{let e=f();if(!e?.runtime?.getManifest)return null;try{let t=e.runtime.getManifest(),r="string"==typeof t?.version?t.version.trim():"";return r.length>0?r:null}catch(e){return console.warn("Unable to resolve extension manifest version.",e),null}},m=async e=>{let t=f();if(t?.tabs?.create)try{return await p({runtimeApi:t,fallbackError:"Failed to create browser tab.",callWithPromise:async()=>{let r=t.tabs.create({url:e});return s(r)?await r:r},callWithCallback:(r,o)=>{t.tabs.create({url:e},e=>{if(c()){o(Error(c()));return}r(e)})}}),!0}catch(e){console.warn("openExternalTab: tabs.create failed",e)}return"undefined"!=typeof window&&(window.open(e,"_blank","noopener,noreferrer"),!0)},h=async(e={active:!0,lastFocusedWindow:!0})=>{let t=f();if(!t?.tabs?.query)return[];try{return await p({runtimeApi:t,fallbackError:"Failed to query browser tabs.",callWithPromise:async()=>{let r=t.tabs.query(e);return s(r)?await r:Array.isArray(r)?r:[]},callWithCallback:r=>{t.tabs.query(e,e=>{r(Array.isArray(e)?e:[])})}})}catch(e){return console.warn("queryTabs: failed",e),[]}},b=async e=>{let t=f();if(!t?.tabs?.get||"number"!=typeof e)return null;try{return await p({runtimeApi:t,fallbackError:"Failed to resolve tab by id.",callWithPromise:async()=>{let r=t.tabs.get(e);return s(r)?await r:r??null},callWithCallback:r=>{t.tabs.get(e,e=>{r(e??null)})}})}catch(e){return console.warn("getTab: failed",e),null}},g=async(e,t)=>{let r=f();if(!r?.tabs?.sendMessage||"number"!=typeof e)throw Error("Browser tabs messaging API is unavailable.");return await p({runtimeApi:r,fallbackError:"Failed to send tab message.",callWithPromise:async()=>{let o=r.tabs.sendMessage(e,t);return s(o)?await o:o},callWithCallback:o=>{r.tabs.sendMessage(e,t,e=>{o(e)})}})},j=async(e,t)=>{let r=f();return r?.tabs?.update&&"number"==typeof e?await p({runtimeApi:r,fallbackError:"Failed to update browser tab.",callWithPromise:async()=>{let o=r.tabs.update(e,t);return s(o)?await o:o??null},callWithCallback:o=>{r.tabs.update(e,t,e=>{o(e??null)})}}):null},x=()=>!!a()?.sidePanel?.setOptions,w=()=>!!f()?.sidebarAction?.open,K=e=>{let t=f();if(!t?.runtime?.getURL)return null;try{return t.runtime.getURL(e)}catch(e){return console.warn("getExtensionUrl: failed",e),null}},P=async e=>{let t=a();if(!t?.sidePanel?.setOptions)return!1;try{let r={path:"sidepanel.html",enabled:!0};return"number"==typeof e&&(r.windowId=e),await t.sidePanel.setOptions(r),!0}catch(e){return console.warn("configureChromeSidePanel: failed",e),!1}},v=async()=>{let e=a();if(!e?.sidePanel?.setPanelBehavior)return!1;try{return await e.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}),!0}catch(e){return console.warn("configureChromeSidePanelBehavior: failed",e),!1}},U=async()=>{let e=f();if(!e?.sidebarAction?.open)return!1;try{return await e.sidebarAction.open(),!0}catch(e){return console.warn("openFirefoxSidebar: failed",e),!1}},E=async()=>{let e=f();if(!e?.action)return!1;let t="function"==typeof e.sidebarAction?.open,r="function"==typeof e.action.setPopup,o="function"==typeof e.action.onClicked?.addListener;if(!t||!r||!o)return!1;try{await p({runtimeApi:e,fallbackError:"Failed to configure Firefox action popup.",callWithPromise:async()=>{let t=e.action.setPopup({popup:""});s(t)&&await t},callWithCallback:t=>{e.action.setPopup({popup:""},()=>t())}})}catch(e){return console.warn("enableFirefoxSidebarActionBehavior: failed to clear popup",e),!1}return n||(e.action.onClicked.addListener(()=>{U()}),n=!0),!0}},{"@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],cHUbl:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"7J4sI":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"ISSUE_KEY_REGEX",()=>n),o.export(r,"normalizeProjectKeySegments",()=>a),o.export(r,"normalizeProjectKeyList",()=>i),o.export(r,"normalizeProjectKey",()=>s),o.export(r,"getJiraBaseUrlFromLocation",()=>l),o.export(r,"detectProjectKeyFromLocation",()=>c),o.export(r,"detectIssueKeyFromSearchParams",()=>u),o.export(r,"detectProjectKeyFromSearchParams",()=>p),o.export(r,"detectProjectKeyFromHash",()=>f),o.export(r,"detectIssueKeyFromPath",()=>d),o.export(r,"detectIssueKeyFromDocument",()=>y),o.export(r,"detectProjectKeyFromDocument",()=>m),o.export(r,"detectIssueKey",()=>h),o.export(r,"deriveProjectKeyFromIssueKey",()=>b),o.export(r,"detectProjectKey",()=>g);let n=/^[A-Z][A-Z0-9]+-[1-9][0-9]*$/i,a=e=>e.split(",").map(e=>e.trim().toUpperCase()).filter(Boolean),i=e=>{let t=a(e),r=new Set;for(let e of t)r.has(e)||r.add(e);return Array.from(r.values())},s=e=>i(e).join(","),l=({location:e}={})=>{try{return e?.origin||""}catch(e){return console.error("getJiraBaseUrlFromLocation: failed to read origin",e),""}},c=e=>{if(!e?.pathname)return"";let t=/\/projects\/([^/]+)/i.exec(e.pathname);return s(t?.[1]??"")},u=e=>{if(!e?.search)return"";try{let t=new URLSearchParams(e.search);return t.get("selectedIssue")||t.get("issueKey")||""}catch(e){return console.error("detectIssueKey: failed to read search params",e),""}},p=e=>{let t=e?.search;if(!t)return"";try{let e=new URLSearchParams(t),r=e.get("projectKey")||e.get("project");if(r)return s(r);for(let[t,r]of e.entries()){if(!r)continue;let e=t.trim().toLowerCase();if("projectkey"===e||"project"===e)return s(r)}}catch(e){console.error("detectProjectKey: failed to read search params",e)}return""},f=e=>{let t=e?.hash;if(!t)return"";let r=t.startsWith("#")?t.slice(1):t;if(!r)return"";try{let e=new URLSearchParams(r.startsWith("?")?r:`?${r}`),t=e.get("projectKey")||e.get("project");if(t)return s(t);for(let[t,r]of e.entries()){if(!r)continue;let e=t.trim().toLowerCase();if("projectkey"===e||"project"===e)return s(r)}}catch(e){console.error("detectProjectKey: failed to read hash params",e)}return""},d=e=>{if(!e?.pathname)return"";let t=e.pathname.split("/").filter(Boolean),r=t[t.length-1]||"";return n.test(r)?r.toUpperCase():""},y=e=>{if(!e)return"";let t=e.querySelector("meta[name='ajs-issue-key']"),r=t?.getAttribute("content");if(r)return r.toUpperCase();let o=e.querySelector("[data-issue-key]"),n=o?.getAttribute("data-issue-key");return n?n.toUpperCase():""},m=e=>{if(!e)return"";let t=(t,r)=>{let o=e.querySelector(t),n=o?.getAttribute(r);return"string"==typeof n?s(n):""};for(let e of["meta[name='ajs-project-key']","meta[name='ajs-projectKey']","meta[name='ghx-project-key']","meta[name='jira-project-key']"]){let r=t(e,"content");if(r)return r}for(let t of["[data-project-key]","[data-projectKey]","[data-project]"]){let r=e.querySelector(t),o=r?.getAttribute("data-project-key")||r?.getAttribute("data-projectKey")||r?.getAttribute("data-project");if(o)return s(o)}let r=(e.body?.dataset?.projectKey??e.body?.dataset?.project)?.toString();if(r)return s(r);try{let e=globalThis.AJS?.Meta?.get;if("function"==typeof e)for(let t of["project-key","projectKey","project.key"]){let r=e(t);if("string"==typeof r&&r.trim().length)return s(r)}}catch(e){console.warn("detectProjectKey: failed to read AJS meta",e)}return""},h=({location:e,document:t}={})=>{let r=u(e);if(r)return r.toUpperCase();let o=d(e);return o||y(t)},b=e=>{if("string"!=typeof e)return"";let[t=""]=e.split("-");return s(t)},g=({location:e,document:t}={})=>{try{let r=c(e);if(r)return r;let o=p(e);if(o)return o;let n=f(e);if(n)return n;let a=m(t);if(a)return a;let i=h({location:e,document:t});if(i)return b(i)}catch(e){console.error("detectProjectKey: detection failed",e)}return""}},{"@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],"474g3":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"resolveActiveTabLocation",()=>m),o.export(r,"detectIssueKey",()=>h),o.export(r,"deriveProjectKeyFromIssueKey",()=>b),o.export(r,"detectProjectKey",()=>g),o.export(r,"resolveProjectKey",()=>x),o.export(r,"resolveIssueKey",()=>w),o.export(r,"resolveIssueContext",()=>K),o.export(r,"getProjectVariables",()=>P),o.export(r,"extractProjectKey",()=>v),o.export(r,"normalizeProjectKey",()=>n.normalizeProjectKey),o.export(r,"getJiraBaseUrlFromLocation",()=>n.getJiraBaseUrlFromLocation),o.export(r,"navigateActiveTab",()=>U),o.export(r,"ISSUE_KEY_REGEX",()=>n.ISSUE_KEY_REGEX),o.export(r,"createLocationFromUrl",()=>u),o.export(r,"JIRA_CONTEXT_MESSAGE_TYPE",()=>E);var n=e("~lib/jira-detection"),a=e("~lib/extension-runtime"),i=e("~lib/extension-origin");let s="jiraExtensions:getJiraContext",l=()=>"undefined"!=typeof window?window.location:void 0,c=()=>"undefined"!=typeof window?window.document:void 0,u=e=>{if("string"==typeof e&&e)try{let t=new URL(e);return{href:t.href,origin:t.origin,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host,hostname:t.hostname,port:t.port,protocol:t.protocol}}catch(e){console.error("createLocationFromUrl: failed to parse URL",e);return}},p=async(e={active:!0,lastFocusedWindow:!0})=>{try{let t=await (0,a.queryTabs)(e);return t[0]}catch(e){console.error("queryActiveTab: failed",e);return}},f=async e=>{let t=await (0,a.getTab)(e);return t??void 0},d=async e=>{try{let t=await (0,a.sendTabMessage)(e,{type:s});if(!t||"object"!=typeof t)return null;return{issueKey:"string"==typeof t.issueKey?t.issueKey:void 0,projectKey:"string"==typeof t.projectKey?t.projectKey:void 0,baseUrl:"string"==typeof t.baseUrl?t.baseUrl:void 0}}catch(e){return console.warn("requestContextFromTab: failed",e),null}},y=async({tabId:e,tabQuery:t}={})=>{let r;if("number"==typeof e&&(r=await f(e)),r||(r=await p(t)),!r||"string"!=typeof r.url||!r.url||(0,i.isBrowserInternalProtocolUrl)(r.url))return null;let o=u(r.url),a=o?h({location:o,document:void 0}):"",s=o?g({location:o,document:void 0}):"",l=o?(0,n.getJiraBaseUrlFromLocation)({location:o}):"",c="number"==typeof r.id?r.id:null;if(null!==c){let e=await d(c);e&&("string"==typeof e.issueKey&&e.issueKey.trim().length&&(a=e.issueKey.toUpperCase()),"string"==typeof e.projectKey&&e.projectKey.trim().length&&(s=(0,n.normalizeProjectKey)(e.projectKey)),"string"==typeof e.baseUrl&&e.baseUrl.trim().length&&(l=e.baseUrl))}return!s&&a&&(s=(0,n.deriveProjectKeyFromIssueKey)(a)),{issueKey:a,projectKey:s,baseUrl:l,location:o}},m=async(e={active:!0,lastFocusedWindow:!0})=>{try{let t=await p(e),r=t?.url;if(!r)return;return u(r)}catch(e){console.error("resolveActiveTabLocation: failed",e);return}},h=({location:e=l(),document:t=c()}={})=>(0,n.detectIssueKey)({location:e,document:t}),b=e=>(0,n.deriveProjectKeyFromIssueKey)(e),g=({location:e=l(),document:t=c()}={})=>(0,n.detectProjectKey)({location:e,document:t}),j=async({location:e=l(),document:t=c(),allowTabLookup:r=!0,tabQuery:o,tabId:a}={})=>{let i=h({location:e,document:t}),s=g({location:e,document:t}),u=e,p=(0,n.getJiraBaseUrlFromLocation)({location:e}),f=r&&(!s||!i);if(f){let e=await y({tabId:a,tabQuery:o});e&&(!i&&e.issueKey&&(i=e.issueKey),!s&&e.projectKey&&(s=e.projectKey),e.location&&(u=e.location),!p&&e.baseUrl&&(p=e.baseUrl))}!s&&i&&(s=(0,n.deriveProjectKeyFromIssueKey)(i));let d=i?i.toUpperCase():"",m=s?(0,n.normalizeProjectKey)(s):"",b="string"==typeof p?p.trim():"";return{issueKey:d,projectKey:m,baseUrl:b,location:u}},x=async(e={})=>{let t=await j(e);return t.projectKey},w=async(e={})=>{let t=await j(e);return t.issueKey},K=async(e={})=>j(e),P=(e={})=>{try{let t=h(e);if(!t)throw Error("Could not determine the parent issue from the URL or page content.");let r=(0,n.deriveProjectKeyFromIssueKey)(t);if(!r)throw Error("Project key could not be determined from the issue key.");return{parentIssueKey:t,projectKey:r}}catch(e){throw Error(`getProjectVariables failed: ${e.message}`)}},v=e=>g(e),U=async e=>{try{let t=await p();if(t?.id!=null){let r=await (0,a.updateTab)(t.id,{url:e});if(r)return!0}}catch(e){console.warn("navigateActiveTab: tabs.update failed, falling back",e)}return await (0,a.openExternalTab)(e),!1},E=s},{"~lib/jira-detection":"7J4sI","~lib/extension-runtime":"4lLoG","~lib/extension-origin":"irUfV","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],irUfV:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"isExtensionProtocolUrl",()=>s),o.export(r,"isBrowserInternalProtocolUrl",()=>l);let n=/^(chrome-extension|moz-extension|edge-extension|safari-web-extension):/i,a=/^(about|chrome|edge|devtools):/i,i=e=>"string"==typeof e?e.trim():"",s=e=>{let t=i(e);return n.test(t)},l=e=>{let t=i(e);return!!t&&(a.test(t)||s(t))}},{"@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}]},["BuRLh"],"BuRLh","parcelRequire4c9f"),globalThis.define=t;