var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,r,o,n,a){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof s[n]&&s[n],c=i.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function u(e,r){if(!c[e]){if(!t[e]){var o="function"==typeof s[n]&&s[n];if(!r&&o)return o(e,!0);if(i)return i(e,!0);if(l&&"string"==typeof e)return l(e);var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}f.resolve=function(r){var o=t[e][1][r];return null!=o?o:r},f.cache={};var p=c[e]=new u.Module(e);t[e][0].call(p.exports,f,p,p.exports,this)}return c[e].exports;function f(e){var t=f.resolve(e);return!1===t?{}:u(t)}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=t,u.cache=c,u.parent=i,u.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(u,"root",{get:function(){return s[n]}}),s[n]=u;for(var p=0;p<r.length;p++)u(r[p]);if(o){var f=u(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):a&&(this[a]=f)}}({BuRLh:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"config",()=>s);var n=e("~contexts/jira-context");let a=()=>{let e=window.location,t=window.document,r=(0,n.detectIssueKey)({location:e,document:t}),o=(0,n.detectProjectKey)({location:e,document:t});!o&&r&&(o=(0,n.deriveProjectKeyFromIssueKey)(r));let a=(0,n.getJiraBaseUrlFromLocation)({location:e}),s=r?r.toUpperCase():"",i=o?(0,n.normalizeProjectKey)(o):"";return{issueKey:s,projectKey:i,baseUrl:"string"==typeof a?a.trim():""}},s={matches:["https://*/secure/*","https://*/browse/*","https://*/projects/*","https://*/issues*","http://*/secure/*","http://*/browse/*","http://*/projects/*","http://*/issues*"],run_at:"document_idle"};"undefined"!=typeof chrome&&chrome.runtime?.onMessage&&chrome.runtime.onMessage.addListener((e,t,r)=>{if(!e||e.type!==n.JIRA_CONTEXT_MESSAGE_TYPE)return!1;try{let e=a();r({success:!0,...e})}catch(e){console.warn("jira-context content script: failed to collect context",e),r({success:!1,issueKey:"",projectKey:"",baseUrl:""})}return!1})},{"~contexts/jira-context":"474g3","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],"474g3":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"resolveActiveTabLocation",()=>d),o.export(r,"detectIssueKey",()=>m),o.export(r,"deriveProjectKeyFromIssueKey",()=>h),o.export(r,"detectProjectKey",()=>j),o.export(r,"resolveProjectKey",()=>K),o.export(r,"resolveIssueKey",()=>b),o.export(r,"resolveIssueContext",()=>x),o.export(r,"getProjectVariables",()=>w),o.export(r,"extractProjectKey",()=>P),o.export(r,"normalizeProjectKey",()=>n.normalizeProjectKey),o.export(r,"getJiraBaseUrlFromLocation",()=>n.getJiraBaseUrlFromLocation),o.export(r,"ISSUE_KEY_REGEX",()=>n.ISSUE_KEY_REGEX),o.export(r,"createLocationFromUrl",()=>l),o.export(r,"JIRA_CONTEXT_MESSAGE_TYPE",()=>U);var n=e("~features/data-analysis/sources/jira/jira");let a=/^(about|chrome|edge|devtools|moz-extension|chrome-extension):/i,s="jiraExtensions:getJiraContext",i=()=>"undefined"!=typeof window?window.location:void 0,c=()=>"undefined"!=typeof window?window.document:void 0,l=e=>{if("string"==typeof e&&e)try{let t=new URL(e);return{href:t.href,origin:t.origin,pathname:t.pathname,search:t.search,hash:t.hash,host:t.host,hostname:t.hostname,port:t.port,protocol:t.protocol}}catch(e){console.error("createLocationFromUrl: failed to parse URL",e);return}},u=async(e={active:!0,lastFocusedWindow:!0})=>{if("undefined"!=typeof chrome&&chrome?.tabs?.query)try{let t=await new Promise((t,r)=>{try{chrome.tabs.query(e,e=>{let o=chrome?.runtime?.lastError;if(o){r(Error(o.message));return}t(e)})}catch(e){r(e)}});return t[0]}catch(e){console.error("queryActiveTab: failed",e);return}},p=async e=>{if("undefined"!=typeof chrome&&chrome?.tabs?.get)return await new Promise(t=>{try{chrome.tabs.get(e,e=>{if(chrome.runtime?.lastError){console.warn("getTabById: tabs.get failed",chrome.runtime.lastError),t(void 0);return}t(e)})}catch(e){console.warn("getTabById: tabs.get threw",e),t(void 0)}})},f=async e=>"undefined"!=typeof chrome&&chrome?.tabs?.sendMessage?await new Promise(t=>{try{chrome.tabs.sendMessage(e,{type:s},e=>{if(chrome.runtime?.lastError||!e||"object"!=typeof e){t(null);return}t({issueKey:"string"==typeof e.issueKey?e.issueKey:void 0,projectKey:"string"==typeof e.projectKey?e.projectKey:void 0,baseUrl:"string"==typeof e.baseUrl?e.baseUrl:void 0})})}catch(e){console.warn("requestContextFromTab: failed",e),t(null)}}):null,y=async({tabId:e,tabQuery:t}={})=>{let r;if("undefined"==typeof chrome||!chrome?.tabs?.get&&!chrome?.tabs?.query||("number"==typeof e&&(r=await p(e)),r||(r=await u(t)),!r||"string"!=typeof r.url||!r.url||a.test(r.url)))return null;let o=l(r.url),s=o?m({location:o,document:void 0}):"",i=o?j({location:o,document:void 0}):"",c=o?(0,n.getJiraBaseUrlFromLocation)({location:o}):"",y="number"==typeof r.id?r.id:null;if(null!==y){let e=await f(y);e&&("string"==typeof e.issueKey&&e.issueKey.trim().length&&(s=e.issueKey.toUpperCase()),"string"==typeof e.projectKey&&e.projectKey.trim().length&&(i=(0,n.normalizeProjectKey)(e.projectKey)),"string"==typeof e.baseUrl&&e.baseUrl.trim().length&&(c=e.baseUrl))}return!i&&s&&(i=(0,n.deriveProjectKeyFromIssueKey)(s)),{issueKey:s,projectKey:i,baseUrl:c,location:o}},d=async(e={active:!0,lastFocusedWindow:!0})=>{try{let t=await u(e),r=t?.url;if(!r)return;return l(r)}catch(e){console.error("resolveActiveTabLocation: failed",e);return}},m=({location:e=i(),document:t=c()}={})=>(0,n.detectIssueKey)({location:e,document:t}),h=e=>(0,n.deriveProjectKeyFromIssueKey)(e),j=({location:e=i(),document:t=c()}={})=>(0,n.detectProjectKey)({location:e,document:t}),g=async({location:e=i(),document:t=c(),allowTabLookup:r=!0,tabQuery:o,tabId:a}={})=>{let s=m({location:e,document:t}),l=j({location:e,document:t}),u=e,p=(0,n.getJiraBaseUrlFromLocation)({location:e}),f=r&&(!l||!s);if(f){let e=await y({tabId:a,tabQuery:o});e&&(!s&&e.issueKey&&(s=e.issueKey),!l&&e.projectKey&&(l=e.projectKey),e.location&&(u=e.location),!p&&e.baseUrl&&(p=e.baseUrl))}!l&&s&&(l=(0,n.deriveProjectKeyFromIssueKey)(s));let d=s?s.toUpperCase():"",h=l?(0,n.normalizeProjectKey)(l):"",g="string"==typeof p?p.trim():"";return{issueKey:d,projectKey:h,baseUrl:g,location:u}},K=async(e={})=>{let t=await g(e);return t.projectKey},b=async(e={})=>{let t=await g(e);return t.issueKey},x=async(e={})=>g(e),w=(e={})=>{try{let t=m(e);if(!t)throw Error("Could not determine the parent issue from the URL or page content.");let r=(0,n.deriveProjectKeyFromIssueKey)(t);if(!r)throw Error("Project key could not be determined from the issue key.");return{parentIssueKey:t,projectKey:r}}catch(e){throw Error(`getProjectVariables failed: ${e.message}`)}},P=e=>j(e),U=s},{"~features/data-analysis/sources/jira/jira":"wWxHy","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],wWxHy:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"ISSUE_KEY_REGEX",()=>s),o.export(r,"resolveRestApiBaseUrl",()=>i),o.export(r,"getJiraBaseUrlFromLocation",()=>c),o.export(r,"normalizeProjectKey",()=>l),o.export(r,"detectProjectKeyFromLocation",()=>u),o.export(r,"detectIssueKeyFromSearchParams",()=>p),o.export(r,"detectProjectKeyFromSearchParams",()=>f),o.export(r,"detectProjectKeyFromHash",()=>y),o.export(r,"detectIssueKeyFromPath",()=>d),o.export(r,"detectIssueKeyFromDocument",()=>m),o.export(r,"detectProjectKeyFromDocument",()=>h),o.export(r,"detectIssueKey",()=>j),o.export(r,"deriveProjectKeyFromIssueKey",()=>g),o.export(r,"detectProjectKey",()=>K);var n=e("~lib/jira-url"),a=e("./project");let s=/^[A-Z][A-Z0-9]+-[1-9][0-9]*$/i,i=e=>{if(!e)return"";try{return(0,n.getJiraRestApiBaseUrl)({baseUrl:e})}catch(e){return console.warn("data-analysis: failed to derive REST base URL",e),""}},c=({location:e}={})=>{try{return e?.origin||""}catch(e){return console.error("getJiraBaseUrlFromLocation: failed to read origin",e),""}},l=e=>(0,a.normalizeProjectKey)(e),u=e=>{if(!e?.pathname)return"";let t=/\/projects\/([^/]+)/i.exec(e.pathname);return l(t?.[1]??"")},p=e=>{if(!e?.search)return"";try{let t=new URLSearchParams(e.search);return t.get("selectedIssue")||t.get("issueKey")||""}catch(e){return console.error("detectIssueKey: failed to read search params",e),""}},f=e=>{let t=e?.search;if(!t)return"";try{let e=new URLSearchParams(t),r=e.get("projectKey")||e.get("project");if(r)return l(r);for(let[t,r]of e.entries()){if(!r)continue;let e=t.trim().toLowerCase();if("projectkey"===e||"project"===e)return l(r)}}catch(e){console.error("detectProjectKey: failed to read search params",e)}return""},y=e=>{let t=e?.hash;if(!t)return"";let r=t.startsWith("#")?t.slice(1):t;if(!r)return"";try{let e=new URLSearchParams(r.startsWith("?")?r:`?${r}`),t=e.get("projectKey")||e.get("project");if(t)return l(t);for(let[t,r]of e.entries()){if(!r)continue;let e=t.trim().toLowerCase();if("projectkey"===e||"project"===e)return l(r)}}catch(e){console.error("detectProjectKey: failed to read hash params",e)}return""},d=e=>{if(!e?.pathname)return"";let t=e.pathname.split("/").filter(Boolean),r=t[t.length-1]||"";return s.test(r)?r.toUpperCase():""},m=e=>{if(!e)return"";let t=e.querySelector("meta[name='ajs-issue-key']"),r=t?.getAttribute("content");if(r)return r.toUpperCase();let o=e.querySelector("[data-issue-key]"),n=o?.getAttribute("data-issue-key");return n?n.toUpperCase():""},h=e=>{if(!e)return"";let t=(t,r)=>{let o=e.querySelector(t),n=o?.getAttribute(r);return"string"==typeof n?l(n):""};for(let e of["meta[name='ajs-project-key']","meta[name='ajs-projectKey']","meta[name='ghx-project-key']","meta[name='jira-project-key']"]){let r=t(e,"content");if(r)return r}for(let t of["[data-project-key]","[data-projectKey]","[data-project]"]){let r=e.querySelector(t),o=r?.getAttribute("data-project-key")||r?.getAttribute("data-projectKey")||r?.getAttribute("data-project");if(o)return l(o)}let r=(e.body?.dataset?.projectKey??e.body?.dataset?.project)?.toString();if(r)return l(r);try{let e=globalThis.AJS?.Meta?.get;if("function"==typeof e)for(let t of["project-key","projectKey","project.key"]){let r=e(t);if("string"==typeof r&&r.trim().length)return l(r)}}catch(e){console.warn("detectProjectKey: failed to read AJS meta",e)}return""},j=({location:e,document:t}={})=>{let r=p(e);if(r)return r.toUpperCase();let o=d(e);return o||m(t)},g=e=>{if("string"!=typeof e)return"";let[t=""]=e.split("-");return l(t)},K=({location:e,document:t}={})=>{try{let r=u(e);if(r)return r;let o=f(e);if(o)return o;let n=y(e);if(n)return n;let a=h(t);if(a)return a;let s=j({location:e,document:t});if(s)return g(s)}catch(e){console.error("detectProjectKey: detection failed",e)}return""}},{"~lib/jira-url":"gjoW7","./project":"hgSq1","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],gjoW7:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"DEFAULT_REST_PATH",()=>a),o.export(r,"CLOUD_REST_PATH",()=>s),o.export(r,"isJiraCloudUrl",()=>c),o.export(r,"getDefaultRestApiPath",()=>l),o.export(r,"getJiraSearchPath",()=>p),o.export(r,"getJiraBaseUrl",()=>f),o.export(r,"getJiraRestApiBaseUrl",()=>y);var n=e("~contexts/jira-context");let a="/rest/api/latest",s="/rest/api/3",i=e=>{if(!e)return null;let t=e.trim();if(!t)return null;let r=/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//.test(t)?t:`https://${t.replace(/^\/+/,"")}`;try{let e=new URL(r);return{host:e.hostname.toLowerCase()}}catch{return null}},c=e=>{let t=i(e);return!!t&&(t.host.endsWith(".atlassian.net")||t.host.endsWith(".jira.com"))},l=e=>c(e)?s:a,u=e=>"string"==typeof e&&/\/rest\/api\/3\b/i.test(e),p=(e={})=>{let{baseUrl:t,restPath:r}=e;return r?u(r)?"/search/jql":"/search":u(t)?"/search/jql":c(t)?"/search/jql":"/search"},f=(e={})=>{let{location:t,fallbackOrigin:r=""}=e,o=(0,n.getJiraBaseUrlFromLocation)({location:t});return o||r},y=(e={})=>{let{baseUrl:t,location:r,restPath:o}=e,n=t||f({location:r});if(!n)return"";let a=o??l(n),s=a.startsWith("/")?a:`/${a}`;return`${n}${s}`}},{"~contexts/jira-context":"474g3","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],cHUbl:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],hgSq1:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"normalizeProjectKeySegments",()=>n),o.export(r,"normalizeProjectKeyList",()=>a),o.export(r,"normalizeProjectKey",()=>s),o.export(r,"findProjectsByKeys",()=>i);let n=e=>e.split(",").map(e=>e.trim().toUpperCase()).filter(Boolean),a=e=>{let t=n(e),r=new Set;for(let e of t)r.has(e)||r.add(e);return Array.from(r.values())},s=e=>a(e).join(","),i=(e,t)=>{let r=t.map(e=>"string"==typeof e?e.trim().toUpperCase():"").filter(Boolean);return r.length?e.filter(e=>{let t=n(e.projectKey??"");return t.some(e=>r.includes(e))}):[]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}]},["BuRLh"],"BuRLh","parcelRequire4c9f"),globalThis.define=t;